<div class="max-w-md mx-auto p-6 bg-white rounded-2xl shadow">
  <h2 class="text-xl font-semibold mb-4">Two-Factor Authentication</h2>

  <% if current_user.otp_required_for_login? %>
    <p class="mb-4 text-green-600">2FA is currently <strong>enabled</strong> on your account.</p>

    <%= button_to "Disable 2FA",
          disable_two_factor_settings_path,
          method: :delete,
          data: { turbo_confirm: "Are you sure you want to disable 2FA?" },
          class: "w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700" %>

    <div class="mt-4">
      <%= button_to "Regenerate Backup Codes",
            regenerate_backup_codes_two_factor_settings_path,
            method: :post,
            data: { turbo_frame: "backup_codes_frame" },
            class: "w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700" %>
    </div>
  <% else %>
    <p class="mb-4 text-gray-600">2FA is not enabled on your account.</p>
    <%= link_to "Set up 2FA",
          setup_two_factor_settings_path,
          class: "w-full inline-block text-center bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700" %>
  <% end %>
</div>

  <turbo-frame id="backup_codes_frame">
    <%= render "two_factor_settings/backup_codes", backup_codes: JSON.parse(current_user.otp_backup_codes) %>
  </turbo-frame>
