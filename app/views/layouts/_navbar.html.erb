<!-- app/views/layouts/_navbar.html.erb -->
<nav class="bg-gray-800 text-white p-4">
  <div class="max-w-7xl mx-auto flex justify-between items-center">
    <!-- Logo -->
    <div class="text-lg font-bold">
      <%= link_to "MyStore", root_path_for_current_user, class: "text-xl font-bold text-white" %>
    </div>

    <!-- Desktop Menu -->
    <div class="hidden md:flex space-x-4">
      <a href="#" class="hover:text-gray-300">Home</a>
      <a href="#" class="hover:text-gray-300">Products</a>
      <a href="#" class="hover:text-gray-300">Contact</a>
	  	<%= link_to cart_items_path, class: "relative text-gray-300 hover:text-white flex items-center" do %>
      	<!-- Cart Icon -->
      	<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      	  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      	        d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2 9h14l-2-9M10 21a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z">
      	  </path>
      	</svg>

      	<!-- Counter Badge -->
      	<span id="cart_counter" class="absolute -top-2 -right-2 bg-blue-600 text-white rounded-full px-2 py-0.5 text-xs">
      	  <%= current_user&.cart_items&.count || 0 %>
      	</span>
    	<% end %>
    	<%= button_to "Sign Out", destroy_user_session_path, method: :delete, class: "hover:text-gray-300" %>
    </div>

		<!-- Mobile Menu Button -->
		<div data-controller="mobile-menu" class="md:hidden relative">
		  <button data-action="click->mobile-menu#toggle" class="text-white focus:outline-none">
		    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
		      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
		    </svg>
		  </button>

		  <!-- Dropdown menu, positioned absolutely -->
		  <div data-mobile-menu-target="menu" class="hidden absolute top-full left-0 mt-2 flex flex-col bg-gray-700 p-4 rounded w-40 shadow-lg z-50">
		    <a href="#" class="hover:text-gray-300 py-1">Home</a>
		    <a href="#" class="hover:text-gray-300 py-1">Products</a>
		    <a href="#" class="hover:text-gray-300 py-1">Contact</a>
		    <%= link_to "Sign Out", destroy_user_session_path, method: :delete, class:"hover:text-gray-300 py-1" %>
		  </div>
		</div>

  </div>
</nav>
