<nav class="bg-gray-800 text-white p-4">
  <div class="max-w-7xl mx-auto flex justify-between items-center">
    <!-- Logo -->
    <div class="text-lg font-bold">
      <%= link_to "MyStore", root_path_for_current_user, class: "text-xl font-bold text-white" %>
    </div>

    <!-- Desktop Menu -->
    <div class="hidden md:flex items-center space-x-4">
      <a href="#" class="hover:text-gray-300">Home</a>
      <a href="#" class="hover:text-gray-300">Products</a>
      <a href="#" class="hover:text-gray-300">Contact</a>

      <!-- Cart -->
      <%= link_to cart_items_path, class: "relative text-gray-300 hover:text-white flex items-center" do %>
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2 9h14l-2-9M10 21a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"></path>
        </svg>
        <span id="cart_counter" class="absolute -top-2 -right-2 bg-blue-600 text-white rounded-full px-2 py-0.5 text-xs">
          <%= current_user&.cart_items&.count || 0 %>
        </span>
      <% end %>

      <!-- Profile Dropdown -->
      <div data-controller="dropdown" class="relative">
        <button data-action="click->dropdown#toggle" class="px-4 py-2 rounded hover:bg-gray-600 focus:outline-none">
          Profile
        </button>
        <div data-dropdown-target="menu" class="hidden absolute right-0 mt-2 w-48 bg-white text-gray-800 rounded shadow-lg z-50">
          <%= link_to "Edit Profile", edit_user_registration_path, class: "block px-4 py-2 hover:bg-gray-200" %>
          <%= button_to "Sign Out", destroy_user_session_path, method: :delete, class: "w-full text-left px-4 py-2 hover:bg-gray-200" %>
        </div>
      </div>
    </div>

    <!-- Mobile Menu Button -->
    <div data-controller="mobile-menu" class="md:hidden relative">
      <button data-action="click->mobile-menu#toggle" class="text-white focus:outline-none">
        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>

      <!-- Mobile Dropdown -->
      <div data-mobile-menu-target="menu" class="hidden absolute top-full left-0 mt-2 flex flex-col bg-gray-700 p-4 rounded w-40 shadow-lg z-50">
        <a href="#" class="hover:text-gray-300 py-1">Home</a>
        <a href="#" class="hover:text-gray-300 py-1">Products</a>
        <a href="#" class="hover:text-gray-300 py-1">Contact</a>
        <%= link_to "Edit Profile", edit_user_registration_path, class: "hover:text-gray-300 py-1" %>
        <%= link_to "Two-Factor Setup", two_factor_settings_path, class: "hover:text-gray-300 py-1" %>
        <%= link_to "Sign Out", destroy_user_session_path, method: :delete, class:"hover:text-gray-300 py-1" %>
      </div>
    </div>

  </div>
</nav>
